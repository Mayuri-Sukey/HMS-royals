<!DOCTYPE html>

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menus</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="adminmenu.css" />
    <link href="login.js" />
    <!--for boxicon css-->

    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
    <style>
      
</style>
    </style>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
 
  </head>

  
    <section id="sidebar">
      <a href="#" class="brand">
        <i class="bx bxs-smile"></i>
        <span class="text">AdminHub</span>
      </a>
      <ul class="side-menu top">
        <li >
          <a href="admin.html">
            <i class="bx bxs-dashboard"></i>
            <span class="text">Dashboard</span>
          </a>
        </li>
        <li class="active">
          <a href="adminmenu.html">
            <i class="bx bxs-shopping-bag-alt"></i>
            <span class="text">Menu</span>
          </a>
        </li>
        <li>
          <a href="offer.html">
            <i class='bx bxs-offer' ></i>
            <span class="text">offers</span>
          </a>
        </li>
  
        <li>
          <a href="analytics.html">
            <i class="bx bxs-doughnut-chart"></i>
            <span class="text">Analytics</span>
          </a>
          </li>
        <li>
          <a href="#">
            <i class='bx bxs-box' ></i>
            <span class="text">Inventory</span>
          </a>
        </li>
        <li>
          <a href="callender.html">
            <i class='bx bxs-calendar' ></i>
            <span class="text">calendar</span>
          </a>
        </li>
        
      </ul>
      <ul class="side-menu">
        <li>
          <a href="setting.html">
            <i class='bx bxs-cog' ></i>
            <span class="text">Settings</span>
          </a>
        </li>
        <li>
          <a href="index.html" class="logout">
            <i class="bx bxs-log-out-circle"></i>
            <span class="text">Logout</span>
          </a>
        </li>
      </ul>
    </section>



<!-- CONTENT -->
<section id="content">
    <!-- NAVBAR -->
    <nav>
        <i class='bx bx-menu' ></i>
        <img src="img/hotellogo1.png" height="60px">
       <form  autocomplete="off">
          <div class="form-input" id="input-box">
              <input type="search" id="searchInput" placeholder="Search...">
              <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
          </div>
          <div class="result-box"></div>
        </form>
      
        <!--<input type="checkbox" id="switch-mode" hidden>
        <label for="switch-mode" class="switch-mode"></label>-->
                <a href="#" class="notification">
            <i class='bx bxs-bell' ></i>
            <span class="num">8</span>
        </a>
        

       <!---- <a href="#" class="profile">
            <img src="img/people.png">
        </a>-->
  </nav>
    <!-- NAVBAR -->
   

 <!--menu content-->


 <main >
  <div id="bgblur" class="bgblur" >
    <div class="head-title">
        <div class="left">
           
            <ul class="breadcrumb">
                <li>
                    <a href="receptionist.css">Dashboard</a>
                </li>
                <li><i class='bx bx-chevron-right' ></i></li>
                <li>
                    <a class="active" href="adminmenu.html"><h3>Menu</h3></a>
                </li>
            </ul>
        </div>
    
<!--         
        <button type="button" class="button1" onclick="deleteformdelay()">
          <span class="button__text">Delete </span>
          <span class="button__icon">
    <svg
    stroke="currentColor"
    viewBox="0 0 24 24"
    fill="none"
    style="width: 1.5rem; height: 1.5rem;"
    class="h-3 w-3 mr-2"
    xmlns="http://www.w3.org/2000/svg"
  > -->
    <path
      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
      stroke-width="2"
      stroke-linejoin="round"
      stroke-linecap="round"
    ></path>
  </svg>
          </span>
          
        </button>

<button type="button" class="button" onclick="addformdelay()">
  <span class="button__text">Add Item</span>
  <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg"><line y2="19" y1="5" x2="12" x1="12"></line><line y2="12" y1="12" x2="19" x1="5"></line></svg></span>
</button>    
    </div>
    <h1 class="heading">Food Types</h1>
    <div class="box-info" id="menuItems">
      <!--<a href="pizzareceptionist.html"><div>
          <img src="pizza.png" class="veg">
            <h3>Pizza</h3>
            <p>&#8377 300</p>
        </div></a>-->
       <!-- <div>
            <img src="img/burger.jpg" class="veg">
                <h3>Burger</h3>
                <p>&#8377 200</p>
        </div>-->
       <!-- <div>
          <a href="receptionist_menudes.html"><div> 
            <img src="img/veg biryani.jpeg" class="veg" >  
                <h3>Biryani</h3>
                <p>&#8377 150</p>
              </div>
             </a>
        </div>-->
        <!--<div>
            <img src="img/soup.jpeg" class="veg">
                <h3>Soup</h3>
                <p>&#8377 100</p>
         </div>
         <div>
            <img src="desert.jpg" class="veg">
                <h3>Desert</h3>
                <p>&#8377 90</p>
         </div>-->
     </div>


       <div class="table-data" id="table-data">
        <div class="order"><h1 class="heading">veg Food</h1><br><br>
          <div class="head" id ="veg-head">
             
           <!-- <div><a href="paneertikareceptionist.html"><img src="img/paneer tikka.avif" class="veg-des"><br><p> Panner Tikka<br> &#8377 150</p></div></a>
            <img src="img/matar paneer.png" class="veg-des">
            <img src="img/allutikki.jpeg" class="veg-des">
           <a href="paneerbuterreceptionist.html"> <img src="/img/pannerbutter.jpg" class="veg-des"></a>
            <img src="/img/kashmiri pulao.jpeg" class="veg-des">
            <img src="/img/dal makani.jpg" class="veg-des">-->
          
        </div>
       <!-- <div class="head-des">
          
            
             <p>Matar Panner<br> &#8377 150</p>
               <p>Potato Cutlet
                <br> &#8377 150</p>
              <p>Paneer Butter Masala <br>&#8377 150</p>
               <p>Kashmiri Pulao <br> &#8377 150</p>
            <p>Dal Makhani <br>&#8377 150</p></tr>
          
        </div>--><br>
        <h1 class="heading">Non-veg Food</h1><br><br>
       <div class="head" id ="nonveg-head">
       <!--   <img src="/img/Hyderabadi Chicken Fry.jpeg" class="veg-des">
           <img src="butter.png" class="veg-des">
            <img src="/img/biryani.png" class="veg-des">
            <img src="/img/fish curry.jpeg" class="veg-des">
            <img src="img/egg bhurji.jpeg" class="veg-des">
            <img src="img/chicken curry.jpeg" class="veg-des">-->
        </div>
        <!--<div class="head-des">
            <p>Chicken Fry  <br> &#8377 150</p>
            <p>butter chicken <br> &#8377 150</p>
            <p> Shahi Biryani <br> &#8377 150</p>
          <p>Fish curry <br> &#8377 150</p>
            <p>Egg Bhurji <br> &#8377 150</p>
            <p>chicken curry <br> &#8377 150</p>
        </div>-->
   </div></div>
    </div>
  </div>
     
 
  
<!---menu content-->

<!--add menu form-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Update Menu</title>
  <style>
    /* Add your styles here */
  </style>
</head>
<body>
  <div class="container" id="container">
    <div class="title">Update Menu</div>
    <div class="content">
      <!-- <form id="updateForm" onsubmit="sendDataToAPI(event)"> -->
      <form
        id="updateForm"
        action="https://polliwog-immune-stallion.ngrok-free.app/menu/savemenu/1"
        method="post"
        enctype="multipart/form-data"
        onsubmit="sendDataToAPI(event)"
      >
        <!-- <form id="updateForm" onsubmit="sendDataToAPI()"> -->
        <div class="user-details">
          <div class="input-box">
            <span class="details">Dish Name</span>
            <input
              type="text"
              placeholder="Enter DishName"
              name="name"
              id="dishname"
              required
            />
          </div>
          <div class="input-box">
            <span class="details">Price</span>
            <input
              placeholder="Enter Price"
              name="price"
              id="price"\
              required
              type="text"
              onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
            />
          </div>
          <div class="input-box">
            <span class="details">Type of food</span>
            <input
              type="text"
              placeholder="e.g. pizza, biryani, etc"
              name="foodtype"
              id="typeoffood"
            />
          </div>
          <div class="input-box">
            <span class="details">Carbohydrates</span>
            <input
              type="int"
              placeholder="Carbs in grams"
              name="carbs"
              id="carbs"
              onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
            />
          </div>
          <div class="input-box">
            <span class="details">Calories</span>
            <input
              type="int"
              placeholder="Calories in kcal"
              name="calories"
              id="calories"
              onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
            />
          </div>
          <div class="input-box">
            <span class="details">Proteins</span>
            <input
              type="int"
              placeholder="Proteins in grams"
              name="proteins"
              id="proteins"
              onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
            />
          </div>

          <div class="radio">
            <div class="input-box">
              <span class="details">Food Type:</span>
              <div class="popular">
                <label for="veg" class="food-type">
                  <input
                    type="radio"
                    id="veg"
                    name="isveg"
                    value="true"
                    id="veg"
                  />
                  Veg
                </label>
                <label for="nonveg" class="food-type">
                  <input
                    type="radio"
                    id="nonveg"
                    name="isveg"
                    value="false"
                    id="veg"
                  />
                  Non-Veg
                </label>
              </div>
            </div>

            <div class="input-box">
              <span class="details">Is It Popular Food?</span>
              <div class="popular">
                <label for="popularYes">
                  <input
                    type="radio"
                    id="popularYes"
                    name="ispopular"
                    value="true"
                    id="popular"
                  />
                  Yes
                </label>

                <label for="popularNo">
                  <input
                    type="radio"
                    id="popularNo"
                    name="ispopular"
                    value="false"
                    id="popular"
                  />
                  No
                </label>
              </div>
            </div>
          </div>
          <br />
          <div class="input-box">
            <span class="details">Upload Image</span>
            <!-- <input type="file" id="photo" name="foodimg">-->
            <!-- click here to upload file --><input
              type="file"
              name="files[]"
              id="files"
            />
            <input type="hidden" name="url" id="url" />
          </div>

          <!-- 
          <input type="file" name="files[]" id="files"> -->
          <!-- click here to upload file -->
          <!-- <input type="hidden" name="url" id="url">
                    <button type="button" onclick="uploadimage()">
                        Upload Image
                    </button> -->

          <div class="input-box">
            <span class="details">Discount</span>
            <input
              type="int"
              placeholder="Discount in %"
              name="discount"
              id="discount"
              onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
            />
          </div>
        </div>
        <div class="input-box">
          <span class="details">Food Details</span>
          <input
            type="text"
            placeholder="Food Details"
            name="fooddetails"
            id="details"
          />
        </div>

        <div class="input-box">
          <button type="submit" class = "saveMenu">Save</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>



    

</div>



<div id="container2" class="container">
   <span class="close" id="close" onclick="close2()">&times;</span>
<form id="deleteForm">
  <h1 >Delete Item</h1>
  <label for="dishNameToDelete" id="Delete">Enter dish name to delete:</label>
  <input type="text" id="dishNameToDelete" name="dishNameToDelete">
  <button type="submit" id="delete" onclick="close2()">Delete</button>
</form>
</div><br><br><br><br><br><br><br><br><br><br><br><br>
<!--add menu form-->
</main>
</section>  
<footer class="footer">
  Designed and Developed by &#169;Royals webTech 2024
 </footer>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>



    <script>

 





        const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');
    
        allSideMenu.forEach(item=> {
            const li = item.parentElement;
        
            item.addEventListener('click', function () {
                allSideMenu.forEach(i=> {
                    i.parentElement.classList.remove('active');
                })
                li.classList.add('active');
            })
        });
        
        
        
        
        // TOGGLE SIDEBAR
        const menuBar = document.querySelector('#content nav .bx.bx-menu');
        const sidebar = document.getElementById('sidebar');
        
        menuBar.addEventListener('click', function () {
            sidebar.classList.toggle('hide');
        })
        
      
        const searchButton = document.querySelector('#content nav form .form-input button');
        const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
        const searchForm = document.querySelector('#content nav form');
        
        searchButton.addEventListener('click', function (e) {
            if(window.innerWidth) {
                e.preventDefault();
                searchForm.classList.toggle('show');
                if(searchForm.classList.contains('show')) {
                    searchButtonIcon.classList.replace('bx-search', 'bx-x');
                } else {
                    searchButtonIcon.classList.replace('bx-x', 'bx-search');
                }
            }
        })
        
        
        
        
        
        if(window.innerWidth ) {
            sidebar.classList.add('hide');
        } else if(window.innerWidth > 576) {
            searchButtonIcon.classList.replace('bx-x', 'bx-search');
            searchForm.classList.remove('show');
        }
        
        
        window.addEventListener('resize', function () {
            if(this.innerWidth > 576) {
                searchButtonIcon.classList.replace('bx-x', 'bx-search');
                searchForm.classList.remove('show');
            }
        })
        
        
        
        function addformdelay() {
       setTimeout(addform, 0); // 2000 milliseconds = 2 seconds
    }
function deleteformdelay() {
       setTimeout(deleteform, 0); // 2000 milliseconds = 2 seconds
}
  
        function addform(){
              var container=document.getElementById('container');
             container.classList.toggle('active');
             var bgblur=document.getElementById('bgblur');
              bgblur.classList.toggle('active');
              
           }

     function close11111() {
      var container = document.getElementById('container');
      container.classList.remove('active');
      var bgblur = document.getElementById('bgblur');
      bgblur.classList.remove('active');

   }

  function deleteform(){
              var container2=document.getElementById('container2');
             container2.classList.toggle('active');
             var bgblur2=document.getElementById('bgblur');
              bgblur2.classList.toggle('active');
              
           }

           function close2() {
      var container = document.getElementById('container2');
      container.classList.remove('active');
      var bgblur2 = document.getElementById('bgblur');
      bgblur2.classList.remove('active');

   }
    

   document.addEventListener('click', function(event) {
  const activeView = document.getElementById('container');
  const activeView2 = document.getElementById('container2');
  // Check if the clicked element is the active view or a descendant of the active view
  const isClickedInsideActiveView = activeView.contains(event.target);
  const isClickedInsideActiveView2 = activeView2.contains(event.target);
  if (!isClickedInsideActiveView && !isClickedInsideActiveView2) {
    // Click occurred outside the active view
    // Change the active view's color to red
    close11111();
    close2();

  } 
 
});



  
// Existing code...

// Event listener for dish deletion
// Event listener for form submission to delete items
// Existing code...

/// Event listener for dish deletion
// Event listener for dish deletion
// Existing code...

// Event listener for dish deletion
// Existing code...

// Event listener for dish deletion
document.getElementById('deleteForm').addEventListener('submit', function(event) {
  event.preventDefault();
  const dishNameToDelete = document.getElementById('dishNameToDelete').value;

  let deleted = false;

  // Check in menuItems array
  const indexInMenuItems = menuItems.findIndex(item => item.name.toLowerCase() === dishNameToDelete.toLowerCase());
  if (indexInMenuItems !== -1) {
    menuItems.splice(indexInMenuItems, 1);
    deleted = true;
  }

  // Check in vegItems array if not found in menuItems
  if (!deleted) {
    const indexInVegItems = vegItems.findIndex(item => item.name.toLowerCase() === dishNameToDelete.toLowerCase());
    if (indexInVegItems !== -1) {
      vegItems.splice(indexInVegItems, 1);
      deleted = true;
    }
  }

  // Check in nonVegItems array if not found in vegItems or menuItems
  if (!deleted) {
    const indexInNonVegItems = nonVegItems.findIndex(item => item.name.toLowerCase() === dishNameToDelete.toLowerCase());
    if (indexInNonVegItems !== -1) {
      nonVegItems.splice(indexInNonVegItems, 1);
      deleted = true;
    }
  }

  if (deleted) {
    renderMenuItems();
    renderVegItems();
    renderNonVegItems();
    saveMenuItemsToLocalStorage();
    saveVegItemsToLocalStorage();
    saveNonVegItemsToLocalStorage();
  } else {
    alert('Dish not found!');
  }
});

// Function to render menu items after deletion
function renderMenuItems() {
  const menuContainer = document.getElementById('menuItems');
  menuContainer.innerHTML = '';

  menuItems.forEach(item => {
    const newDiv = createMenuItem(item);
    menuContainer.appendChild(newDiv);
  });
}

// Function to save menu items to local storage
function saveMenuItemsToLocalStorage() {
  localStorage.setItem('menuItems', JSON.stringify(menuItems));
}

// Existing code...

function saveNonVegItemsToLocalStorage() {
  localStorage.setItem('nonVegItems', JSON.stringify(nonVegItems));
}

// Existing code...




// Existing code...

// Existing code...


 
   
  

  

         /*form css*/
         // This is where you'd handle form submission and updating the dish information
        // Existing menu items
  var menuItems = JSON.parse(localStorage.getItem('menuItems')) || [
  {
    popularId:1,
    imageSrc: 'pizza.png',
    name: 'Pizza',
    price: '&#8377 250',
    link: 'pizza.html'
  },
  {
    popularId:2,
    imageSrc: 'img/burger.jpg',
    name: 'Burger',
    price: '&#8377 200'
  },
  {
    popularId:3,
    imageSrc: 'img/veg biryani.jpeg',
    name: 'Biryani',
    price: '&#8377 200',
    link: 'biryani.html'
  },
  {
    popularId:4,
    imageSrc: 'img/soup.jpeg',
    name: 'Soup',
    price: '&#8377 100'
  },
  {
    popularId:5,
    imageSrc: 'desert.jpg',
    name: 'Desert',
    price: '&#8377 90'
  },
];




// Retrieve menu items from local storage or set default values

// Function to display menu items based on search results


// Function to perform search on menu items







/* this is for updating*/
var menuItems = JSON.parse(localStorage.getItem('menuItems')) || [
      // Your default menu items here...
    ];

    // Function to find index of an item by name
    function findItemIndexByName(name) {
      return menuItems.findIndex(item => item.name === name);
    }
    
    // Example: Deleting an item by name 'Desert'
    var itemNameToDelete = 'Desert';

    // Find the index of the item by its name
    var indexToDelete = findItemIndexByName(itemNameToDelete);

    if (indexToDelete !== -1) {
      // Remove the item at the found index
      menuItems.splice(indexToDelete, 1);
      console.log('Item deleted successfully!');
    } else {
      console.log('Item not found!');
    }

    // Example: Update link for an item by name 'Biryani'
    var itemNameToUpdate = 'Pizza';
    var itemIndexToUpdate = findItemIndexByName(itemNameToUpdate);

    if (itemIndexToUpdate !== -1) {
      // Update the link for the item
      menuItems[itemIndexToUpdate].link = 'pizza.html';
      console.log('Item link updated successfully!');
    } else {
      console.log('Item not found for link update!');
    }

    // Save the updated menuItems back to localStorage
    localStorage.setItem('menuItems', JSON.stringify(menuItems));

   

    


// Function to save menuItems array to localStorage
function createMenuItems() {
    const menuContainer = document.getElementById('menuItems');

    menuItems.forEach(item => {
      const newDiv = document.createElement('div');
      newDiv.innerHTML = `
        <img src="${item.imageSrc}" class="veg">
        <h3>${item.name}</h3>
        <p>${item.price}</p>
      `;
      newDiv.classList.add('menu-item');

      // Add click event listener to redirect on click
      newDiv.addEventListener('click', () => {
        console.log(`Redirecting to: ${item.link}`);
        window.location.href = `pizza.html?id=${item.name}`; // Redirect to specified link
      });

      menuContainer.appendChild(newDiv);
    });
  }

  createMenuItems();

// Function to add a new menu item
function addMenuItemToDisplay(item) {
  const menuContainer = document.getElementById('menuItems');
  const newDiv = createMenuItem(item);
  menuContainer.appendChild(newDiv);

  // Save the updated menuItems array to localStorage after adding the item
  saveMenuItemsToLocalStorage();
}


/* for vegitems*/
function addVegItemsToDisplay(item) {
  const vegContainer = document.getElementById('veg-head');
  const vegDiv = createVegItems(item);
  vegContainer.appendChild(vegDiv);
}

// Function to fetch data from the backend
const fetchData = async () => {
  const response = await fetch(
    `https://polliwog-immune-stallion.ngrok-free.app/menu/getmenus/vegornonveg/1/veg`,
    {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
        "ngrok-skip-browser-warning": "true",
      },
    }
  );

  if (response.ok) {
    const data = await response.json();
    vegItems = data;
    console.log("vegItems : ", vegItems);
    renderData();
  } else {
    alert("Unable to fetch data");
  }
};

// Function to render data on the webpage
// ...

// Function to create a veg item element
function createVegItem( name, price, id,foodimg,discount) {
  const vegItem = document.createElement('div');
  vegItem.innerHTML = `
    <a href="menusdescription.html?id=${id}">
      <img src="${foodimg}" alt="${name}" class="veg-des">
      <br>
      <p>${name}</p><p><span style="text-decoration: line-through; color: green;">&#8377; ${price}</span>&nbsp; &nbsp;<span>${discount}% Off</span></p><p>&#8377; ${price-price*discount/100}</p>
    </a>
  `;
  vegItem.classList.add('veg-head');

  vegItem.addEventListener('click', () => {
    console.log(`Redirecting to: menusdescription.html?id=${id}`);
  });

  return vegItem;
}

// Function to render data on the webpage
const renderData = () => {
  const vegContainer = document.getElementById('veg-head');

  // Iterate over vegItems array
  vegItems.forEach(item => {
    // Create a veg item element for each item
    const vegItemElement = createVegItem( item.name, item.price, item.id,item.foodimg,item.discount);

    // Append the created veg item element to the vegContainer
    vegContainer.appendChild(vegItemElement);
  });
};

// ...

// Call the fetchData function to fetch data and render it
fetchData();






/* for vegitems*/
function addnonVegItemsToDisplay(item) {
  const nonvegContainer = document.getElementById('nonveg-head');
  const nonvegDiv = createnonVegItems(item);
  nonvegContainer.appendChild(nonvegDiv);
}

// Function to fetch data from the backend
const fetchDatanon = async () => {
  const response = await fetch(
    `https://polliwog-immune-stallion.ngrok-free.app/menu/getmenus/vegornonveg/1/nonveg`,
    {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
        "ngrok-skip-browser-warning": "true",
      },
    }
  );

  if (response.ok) {
    const data = await response.json();
    nonvegItems = data;
    console.log("nonvegItems : ", nonvegItems);
    renderDatanon();
  } else {
    alert("Unable to fetch data");
  }
};

// Function to render data on the webpage
// ...

// Function to create a veg item element
function createnonVegItem( name, price, id,foodimg,discount) {
  const nonvegItem = document.createElement('div');
  nonvegItem.innerHTML = `
    <a href="menusdescription.html?id=${id}">
      <img src="${foodimg}" alt="${name}" class="veg-des">
      <br>
      <p>${name}</p><p><span style="text-decoration: line-through; color: green;">&#8377; ${price}</span>&nbsp; &nbsp;<span>${discount}% Off</span></p><p>&#8377; ${price-price*discount/100}</p>
    </a>
  `;
  nonvegItem.classList.add('nonveg-head');

  nonvegItem.addEventListener('click', () => {
    console.log(`Redirecting to: menusdescription.html?id=${id}`);
  });

  return nonvegItem;
}

// Function to render data on the webpage
const renderDatanon = () => {
  const nonvegContainer = document.getElementById('nonveg-head');

  // Iterate over vegItems array
  nonvegItems.forEach(item => {
    // Create a veg item element for each item
    const nonvegItemElement = createnonVegItem( item.name, item.price, item.id,item.foodimg,item.discount);

    // Append the created veg item element to the vegContainer
    nonvegContainer.appendChild(nonvegItemElement);
  });
};

// ...

// Call the fetchData function to fetch data and render it
fetchDatanon();








document.addEventListener("DOMContentLoaded", function () {
  const resultBox = document.querySelector(".result-box");
  const form = document.querySelector("form");
  const inputBox = document.getElementById("searchInput");

  if (form && inputBox) {
    form.addEventListener("submit", function (event) {
      event.preventDefault(); // Prevent the default form submission behavior

      let input = inputBox.value.trim();
      let result = [];

      if (input.length) {
        result = vegItems.filter((item) =>
          item.name.toLowerCase().includes(input.toLowerCase())
        );
      }

      display(result);
    });

    inputBox.addEventListener("input", function () {
      let input = inputBox.value.trim();
      let result = [];

      if (input.length) {
        result = vegItems.filter((item) =>
          item.name.toLowerCase().includes(input.toLowerCase())
        );
      }
      else if (input.length) {
        result = nonvegItems.filter((item) =>
          item.name.toLowerCase().includes(input.toLowerCase())
        );
      }

      display(result);
    });

    // Add click event listener to the resultBox to handle clicks on suggestions
    resultBox.addEventListener("click", function (event) {
      const target = event.target;
      if (target.tagName === "LI") {
        // Extract the vegId from the clicked suggestion
          const id = parseInt(target.id);
        // Redirect to the VegItem page based on vegId
        window.location.href = `menusdescription.html?id=${id}`;
      }
    });
  }

  function display(result) {
    if (result.length) {
      const content = result
        .map((item) => `<li id="${item.id}">${item.name} </li>`)
        .join("");
      resultBox.innerHTML = "<ul>" + content + "</ul>";
    } 
    else{
      resultBox.innerHTML =" ";
    }
  }

  
});





/*function savevegItemsToLocalStorage() {
  localStorage.setItem('vegItems', JSON.stringify(vegItems));
}*/

// Function to create a menu item HTML
/*function createvegItems(item) {
  const newDiv = document.createElement('div');
  newDiv.innerHTML = `
    <img src="${item.imageSrc}" class="veg-des">
    <h3>${item.name}</h3>
    <p>${item.price}</p>
  `;
  newDiv.classList.add('vegItems');

  // Check if the link exists before adding event listener
  newDiv.addEventListener('click', () => {
    console.log(`Redirecting to: menusdescription.html?id=${item.name}`);
    window.location.href = `menusdescription.html?id=${item.name}`;
  });

  return newDiv;
}*/




// Function to add a new menu item
function addvegItemsToDisplay(item) {
  const vegContainer = document.getElementById('veg-head');
  const vegDiv = createvegItems(item);
  vegContainer.appendChild(vegDiv);

  // Save the updated menuItems array to localStorage after adding the item
 // savevegItemsToLocalStorage();
}

/*for nonvegitems*/

// const nonVegItems = [
//     {
//       nonVegId:1,
//       imageSrc: '/img/Hyderabadi Chicken Fry.jpeg',
//       name: 'Chicken Fry',
//       price: '&#8377 150',
     
   
//     },
//     {
//       nonVegId:2,
//       imageSrc: 'butter.png',
//       name: 'Butter Chicken',
//       price: '&#8377 150',
      
  
//     },
    
//     {
//       nonVegId:3,
//     imageSrc: '/img/biryani.png',
//     name: 'Biryani',
//     price: '&#8377; 150',
  
//   },
//   {

//     nonVegId:4,
//     imageSrc: '/img/fish curry.jpeg',
//     name: 'Fish Curry',
//     price: '&#8377; 150',
 
//   },
//   {
//     nonVegId:5,
//     imageSrc: '/img/egg bhurji.jpeg',
//     name: 'Egg Bhurji',
//     price: '&#8377; 150',

//   },
//   {
//     nonVegId:5,
//     imageSrc: '/img/chicken curry.jpeg',
//     name: 'Chicken Curry',
//     price: '&#8377; 150',

//   },
//   {
//     nonVegId:6,
//     imageSrc: '/img/chicken curry.jpeg',
//     name: 'Chicken Curry',
//     price: '&#8377; 150',
   
//   }

//     // Add more non-veg items here
//   ];


  



/*  function savenonVegItemsToLocalStorage() {
  localStorage.setItem('nonVegItems', JSON.stringify(nonVegItems));
}*/

// Function to create a menu item HTML
/*function createnonVegItems(item) {
  const newDiv = document.createElement('div');
  newDiv.innerHTML = `
    <img src="${item.imageSrc}" class="veg-des">
    <h3>${item.name}</h3>
    <p>${item.price}</p>
  `;
  newDiv.classList.add('nonVegItems');

  // Check if the link exists before adding event listener
  newDiv.addEventListener('click', () => {
    console.log(`Redirecting to: menusdescription.html?id=${item.name}`);
    window.location.href = `menusdescription.html?id=${item.name}`;
  });

  return newDiv;
}*/

// Function to add a new menu item
// function addnonVegItemsToDisplay(item) {
//   const nonVegContainer = document.getElementById('nonveg-head');
//   const  nonVegDiv = createnonVegItems(item);
//   nonVegContainer.appendChild(nonVegDiv);

  // Save the updated menuItems array to localStorage after adding the item
 /* savenonVegItemsToLocalStorage();*/
// }

// Function to handle form submission
// document.getElementById('updateForm').addEventListener('submit', function(event) {
//   event.preventDefault(); // Prevent form submission and page reload

//   // Get form data
//   const dishName = document.getElementById('dishName').value;
//   const price = document.getElementById('price').value;
//   const type = document.getElementById('type').value;
//   const imageSrc = document.getElementById('photo').files[0];

//   const reader = new FileReader();

//   reader.onload = function(event) {
//     const imageDataURL = event.target.result;

//     // Create the dish object with the retrieved form values
//     const dishObject = {
//       imageSrc: imageDataURL,
//       name: dishName,
//       price: 'â‚¹' + price
//     };

//     // Determine the type of the dish and add it to the respective menu array
//     if (type === 'popular') {
//       menuItems.push(dishObject);
//       addMenuItemToDisplay(dishObject);
//     } else if (type === 'veg') {
//       vegItems.push(dishObject);
//       addvegItemsToDisplay(dishObject);
//     } else if (type === 'nonveg') {
//       nonVegItems.push(dishObject);
//       addnonVegItemsToDisplay(dishObject);
//     }
//   };

//   // Read the selected image file as a data URL
//   reader.readAsDataURL(imageSrc);
// });

// Initial creation of menu items
const menuContainer = document.getElementById('menuItems');
  menuItems.forEach(item => {
  const newDiv = createMenuItem(item);
  menuContainer.appendChild(newDiv);
});


/*const vegContainer = document.getElementById('veg-head');
vegItems.forEach(item => {
  const newDiv = createvegItems(item);
  vegContainer.appendChild(newDiv);
});*/




// Sample array of menu items with image sources
// function createVegItem(imageSrc, name, price, vegId) {
//   const vegItem = document.createElement('div');
//   vegItem.innerHTML = `
//     <a href="menusdescription.html?id=${vegId}">
//       <img src="${imageSrc}" class="veg-des">
//       <br>
//       <p>${name}<br>${price}</p>
//     </a>
//   `;
//   vegItem.classList.add('veg-head');

//   vegItem.addEventListener('click', () => {
//     console.log(`Redirecting to: menusdescription.html?id=${vegId}`);
//   });

//   return vegItem;
// }




// function createVegItems() {
//   const vegContainer = document.getElementById('veg-head');

//   vegItems.forEach(item => {
//     const newVegItem = createVegItem(item.imageSrc, item.name, item.price, item.vegId);
//     vegContainer.appendChild(newVegItem);
//   });
// }

// createVegItems();


/*non veg food*/

  // function createNonVegItem(imageSrc, name, price, link,nonVegId) {
  //   const nonVegItems = document.createElement('div');
  //   nonVegItems.innerHTML = `
  //     <a href="menusdescription.html?id=${nonVegId}">
  //       <img src="${imageSrc}" class="nonveg-des">
  //       <br>
  //       <p>${name}<br>${price}</p>
  //     </a>
  //   `;
  //   nonVegItems.classList.add(`nonveg-head`);
   
  //   nonVegItems.addEventListener('click', () => {
  //   console.log(`Redirecting to: menusdescription.html?id=${item.name}`);
  //   window.location.href = `menusdescription.html?id=${item.name}`;
  // });

  // return nonVegItems;
  // }

  
  // function createNonVegItems() {
  //   const nonVegContainer = document.getElementById('nonveg-head');

  //   nonVegItems.forEach(item => {
  //     const newNonVegItem = createNonVegItem(item.imageSrc, item.name, item.price, item.link,item.nonVegId);
  //     nonVegContainer.appendChild(newNonVegItem);
  //   });
  // }

  // createNonVegItems();

  // function sendDataToAPI(event) {
  //   event.preventDefault(); // Prevent default form submission

  //   // Rest of your code
  //   // ...

  //   // Alternatively, you can use FormData to gather form data if needed
  //   // const formData = new FormData(event.target);
  //   // ...

  //   // Make API request
  //   fetch("https://royalwebtech-restaurant-production.up.railway.app/menu/savemenu/1", {
  //       method: 'POST',
  //       headers: {
  //           'Content-Type': 'application/json',
  //       },
  //       body: JSON.stringify(requestData),
  //   })
  //   .then(response => {
  //       // Handle response
  //       // ...
  //   })
  //   .catch(error => {
  //       // Handle errors
  //       // ...
  //   });
  // }

  



  

//   function sendDataToAPI(event) {
//     event.preventDefault(); // Prevent form submission

//     // Get form data
//     const name = document.getElementById('dishname').value;
//     const price = document.getElementById('price').value;
//     const foodType = document.querySelector('input[name="foodtype"]').value;
//     const isVeg = document.querySelector('input[name="isveg"]:checked').value;
//     const isPopular = document.querySelector('input[name="ispopular"]:checked').value;
//     const discount = document.querySelector('input[name="discount"]').value;
//     const foodImg = document.getElementById('photo').value;
//     const foodDetails = document.getElementById('details').value;
//     const carbs = document.getElementById('carbs').value;
//     const calories = document.getElementById('calories').value;
//     const proteins = document.getElementById('proteins').value;

//     // Prepare data as JSON
//     const requestData = {
//         name,
//         price,
//         foodType,
//         isVeg,
//         isPopular,
//         discount,
//         foodImg,
//         foodDetails,
//         carbs,
//         calories,
//         proteins,
//     };

//     // Make API request
//     fetch("https://royalwebtech-restaurant-production.up.railway.app/menu/savemenu/1", {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json',
//         },
//         body: JSON.stringify(requestData),
//     })
//     .then(response => {
//         if (!response.ok) {
//             throw new Error(`HTTP error! Status: ${response.status}`);
//         }
//         return response.json();
//     })
//     .then(data => {
//         // Handle the response data
//         console.log('Data sent successfully:', data);
//         alert("Data sent successfully: " + JSON.stringify(data));

//         // Optionally, update the DOM or display a message on success
//         // (updateForm might not be defined in this context)
//         // document.getElementById('updateForm').reset(); // Clear the form
//         // document.getElementById('statusMessage').innerHTML = "Data sent successfully";
//     })
//     .catch(error => {
//         // Handle errors during the API call
//         console.error('Error sending data:', error);
//         alert("Error sending data: " + error.message);

//         // Optionally, update the DOM or display an error message
//         // document.getElementById('statusMessage').innerHTML = "Error sending data";
//     });
// }


 // Add other form fields similarly


    




 

//   function sendDataToAPI() {
//     // Prevent the default form submission behavior
  

//     // Get form data
//     const formData = new FormData(document.getElementById('updateForm'));

//     // Make a POST request using fetch
//     fetch("https://royalwebtech-restaurant-production.up.railway.app/menu/savemenu/1", {
//       method: 'POST',
//       body: formData,
//     })
//       .then(response => {
//         if (!response.ok) {
//           throw new Error(`HTTP error! Status: ${response.status}`);
//         }
//         return response.json();
//       })
//       .then(data => {
//         // Handle the response data
//         console.log('Data sent successfully:', data);
//         alert("Data sent successfully");

//         // Optionally, update the DOM or display a message on success
//         document.getElementById('updateForm').reset(); // Clear the form
//         document.getElementById('statusMessage').innerHTML = "Data sent successfully";
//       })
//       .catch(error => {
//   // Handle errors during the API call
//   console.log('Error sending data:', error);
//   alert("Error sending data: " + error.message);

//   // Optionally, update the DOM or display an error message
//   document.getElementById('statusMessage').innerHTML = "Error sending data: " + error.message;
// });
//   }





</script>
  
<script>
  // Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyDoljoSPrgzgSoiJFR9DRs3zU40ZEZrN_0",
    authDomain: "fir-img-dfdc9.firebaseapp.com",
    projectId: "fir-img-dfdc9",
    storageBucket: "fir-img-dfdc9.appspot.com",
    messagingSenderId: "492489447470",
    appId: "1:492489447470:web:0e3c6990edcfe1e0b967bf",
  };

  firebase.initializeApp(firebaseConfig);

  var messagesRef = firebase.database().ref("Checking");

  async function sendDataToAPI(event) {
    event.preventDefault(); // Prevent default form submission
    // Uploading file in storage
    function uploadimage() {
      var storage = firebase.storage();
      var file = document.getElementById("files").files[0];
      var storageref = storage.ref();
      // Use a fixed type or dynamically generate one if needed
      var type = "your_fixed_type_or_generate_dynamic_one";
      var thisref = storageref.child(type).child(file.name).put(file);

      thisref.on(
        "state_changed",
        function (snapshot) {},
        function (error) {},
        function () {
          // Uploaded completed successfully, now we can get the download URL
          thisref.snapshot.ref
            .getDownloadURL()
            .then(function (downloadURL) {
              // Getting the URL of the image
              document.getElementById("url").value = downloadURL;
              console.log("Image URL:", downloadURL);
              alert("Uploaded successfully");
              //  saveMessage(downloadURL);

              // Get form data
              const name = document.getElementById("dishname").value;
              const price = document.getElementById("price").value;
              const foodType = document.querySelector(
                'input[name="foodtype"]'
              ).value;
              const isVeg = document.querySelector(
                'input[name="isveg"]:checked'
              ).value;
              const isPopular = document.querySelector(
                'input[name="ispopular"]:checked'
              ).value;
              const discount = document.getElementById("discount").value;
              const foodImg = downloadURL; // Assuming you want to upload a file
              const foodDetails = document.getElementById("details").value;
              const carbs = document.getElementById("carbs").value;
              const calories = document.getElementById("calories").value;
              const proteins = document.getElementById("proteins").value;
              console.log("downloadur", foodImg);
              // Prepare data as FormData
              const formData = new FormData();
              formData.append("name", name);
              formData.append("price", price);
              formData.append("foodtype", foodType);
              formData.append("isveg", isVeg);
              formData.append("ispopular", isPopular);
              formData.append("discount", discount);
              formData.append("foodimg", foodImg);
              formData.append("fooddetails", foodDetails);
              formData.append("carbs", carbs);
              formData.append("calories", calories);
              formData.append("proteins", proteins);

              // Make API request
              fetch(" https://polliwog-immune-stallion.ngrok-free.app/menu/savemenu/1", {
                method: "POST",
                body: formData,
              })
                .then((response) => {
                  if (!response.ok) {
                    throw new Error();
                  }
                  // No need to return response.json(), as we may not receive JS
                  // alert("Data sent successfully");
                  Swal.fire({
                    position: "center",
                    icon: "success",
                    title: "Your work has been saved",
                    showConfirmButton: false,
                    timer: 3000,
                  })
                  .then(() => {
                    // Execute this code after the SweetAlert finishes
                    location.reload();
                  });
                })
                .catch((error) => {
                  // Handle errors during the API call

                  alert("Error sending data");
                });
            });
        }
      );
    }

    // Save message to the Firebase database
    //  function saveMessage(url) {
    //      var newMessageRef = messagesRef.push();
    //      newMessageRef.set({
    //          imageurl: url,
    //      });
    //  }
    uploadimage();
  }
</script>

    </body>
</html>