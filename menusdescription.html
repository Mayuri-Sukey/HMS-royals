<!DOCTYPE html>

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menus</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="adminmenu.css" />
    <link rel = "stylesheet" href="biryani.css"/>
    <link href="login.js" />
    <!--for boxicon css-->

    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
    <style>
      
</style>
    </style>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <body>
    <section id="sidebar">
      <a href="#" class="brand">
        <i class="bx bxs-smile"></i>
        <span class="text">AdminHub</span>
      </a>
      <ul class="side-menu top">
        <li class="active">
          <a href="admin.html">
            <i class="bx bxs-dashboard"></i>
            <span class="text">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="adminmenu.html">
            <i class="bx bxs-shopping-bag-alt"></i>
            <span class="text">Menu</span>
          </a>
        </li>
          <li>
            <a href="offer.html">
              <i class='bx bxs-offer' ></i>
              <span class="text">offers</span>
            </a>
          </li>
    
          <li>
            <a href="analytics.html">
              <i class="bx bxs-doughnut-chart"></i>
              <span class="text">Analytics</span>
            </a>
            </li>
          <li>
            <a href="#">
              <i class='bx bxs-box' ></i>
              <span class="text">Inventory</span>
            </a>
          </li>
          <li>
            <a href="#">
              <i class='bx bxs-calendar' ></i>
              <span class="text">calendar</span>
            </a>
          </li>
          
        </ul>
        <ul class="side-menu">
          <li>
            <a href="setting.html">
              <i class='bx bxs-cog' ></i>
              <span class="text">Settings</span>
            </a>
          </li>
        <li>
          <a href="index.html" class="logout">
            <i class="bx bxs-log-out-circle"></i>
            <span class="text">Logout</span>
          </a>
        </li>
      </ul>
    </section>



<!-- CONTENT -->
<section id="content">
    <!-- NAVBAR -->
    <nav>
        <i class='bx bx-menu' ></i>
        <a href="#" class="nav-link">Categories</a>
        <form action="#">
            <div class="form-input">
                <input type="search" placeholder="Search...">
                <button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
            </div>
        </form>
        <!--<input type="checkbox" id="switch-mode" hidden>
        <label for="switch-mode" class="switch-mode"></label>-->
                <a href="#" class="notification">
            <i class='bx bxs-bell' ></i>
            <span class="num">8</span>
        </a>
        

       <!---- <a href="#" class="profile">
            <img src="img/people.png">
        </a>-->
    </nav>
    <!-- NAVBAR -->
   

 <!--menu content-->


 <main >
  <div id="bgblur" class="bgblur">
    <div class="head-title">
        <div class="left">
           
            <ul class="breadcrumb">
                <li>
                    <a href="receptionist.css">Dashboard</a>
                </li>
                <li><i class='bx bx-chevron-right' ></i></li>
                <li>
                    <a class="active" href="adminmenu.html"><h3>Menu</h3></a>
                </li>
            </ul>
        </div>
        
        
    </div>
</main>
<!--dwscription-->
 <div class="contentdes" id="item-details">

  <div>
    
</div>
 

<div class="container" id="container">
  <div class="title">Update Menu</div>
  <div class="content">
    <!-- <form id="updateForm" onsubmit="sendDataToAPI(event)"> -->
      <form id="updateForm" action="https://polliwog-immune-stallion.ngrok-free.app/menu/edit/menu/" method="post" enctype="multipart/form-data" onsubmit="sendDataToAPI(event)">
        <!-- <form id="updateForm" onsubmit="sendDataToAPI()"> -->
      <div class="user-details">
        <div class="input-box">
          <span class="details">Dish Name</span>
          <input type="text" placeholder="Enter DishName" name="name"   id="dishname" required>
        </div>
        <div class="input-box">
          <span class="details">Price</span>
          <input placeholder="Enter Price" name="price"  id="price" required type="text" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57">
        </div>
        <div class="input-box">
          <span class="details">Type of food</span>
          <input type="text" placeholder="e.g. pizza, biryani, etc" name="foodtype" id="typeoffood" >
        </div>
        <div class="input-box">
          <span class="details">Carbohydrates</span>
          <input type="int" placeholder="Carbs in grams" name="carbs" id="carbs" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57">
        </div>
        <div class="input-box">
          <span class="details">Calories</span>
          <input type="int" placeholder="Calories in kcal" name="calories" id="calories" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57">
        </div>
        <div class="input-box">
          <span class="details">Proteins</span>
          <input type="int" placeholder="Proteins in grams" name = "proteins" id="proteins" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57">
        </div>
     
      
      <div class="radio">
      <div class="input-box">  
    
        <span class="details">Food Type:</span>
        <div class="popular">
        <label for="veg" class="food-type">
          <input type="radio" id="veg" name="isveg"  id="veg"> Veg
        </label>
        <label for="nonveg" class="food-type">
          <input type="radio" id="nonveg" name="isveg"  id="nonveg"> Non-Veg
        </label>
        </div>
      </div>
     
      <div class="input-box">
        <span class="details">Is It Popular Food?</span>
      <div class="popular">
        <label for="popularYes">
          <input type="radio" id="popularYes" name="ispopular" > Yes
        </label>
      
        <label for="popularNo">
          <input type="radio" id="popularNo" name="ispopular" > No
        </label>
      </div>
  </div>
    </div><br>
    <div class="input-box">
      <span class="details">Upload Image</span>
      <!-- <input type="file" id="photo" name="foodimg">-->
      <!-- click here to upload file --><input type="file" name="files[]" id="files"> 
      <input type="hidden" name="url" id="url">
    
     </div>

<!-- 
    <input type="file" name="files[]" id="files"> -->
              <!-- click here to upload file -->
              <!-- <input type="hidden" name="url" id="url">
              <button type="button" onclick="uploadimage()">
                  Upload Image
              </button> -->

    <div class="input-box">
      <span class="details">Discount</span>
      <input type="int" placeholder="Discount in %" name="discount" id="discount" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57">
    </div>
  </div> 
    <div class="input-box">
      <span class="details">Food Details</span>
      <input type="text" placeholder="Food Details" name="fooddetails" id="details" >
    </div>
    
      <div class="input-box">
        <button type="submit" class="saveMenu" >Update</button>
      </div>
    </form>
  </div>
</div>
 </div>



 </section>
 <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <script>
    const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

    allSideMenu.forEach(item=> {
        const li = item.parentElement;
    
        item.addEventListener('click', function () {
            allSideMenu.forEach(i=> {
                i.parentElement.classList.remove('active');
            })
            li.classList.add('active');
        })
    });
    
    
    
    
    // TOGGLE SIDEBAR
    const menuBar = document.querySelector('#content nav .bx.bx-menu');
    const sidebar = document.getElementById('sidebar');
    
    menuBar.addEventListener('click', function () {
        sidebar.classList.toggle('hide');
    })
    
  
    const searchButton = document.querySelector('#content nav form .form-input button');
    const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
    const searchForm = document.querySelector('#content nav form');
    
    searchButton.addEventListener('click', function (e) {
        if(window.innerWidth) {
            e.preventDefault();
            searchForm.classList.toggle('show');
            if(searchForm.classList.contains('show')) {
                searchButtonIcon.classList.replace('bx-search', 'bx-x');
            } else {
                searchButtonIcon.classList.replace('bx-x', 'bx-search');
            }
        }
    })
    
    
    
    
    
    if(window.innerWidth ) {
        sidebar.classList.add('hide');
    } else if(window.innerWidth > 576) {
        searchButtonIcon.classList.replace('bx-x', 'bx-search');
        searchForm.classList.remove('show');
    }
    
    
    window.addEventListener('resize', function () {
        if(this.innerWidth > 576) {
            searchButtonIcon.classList.replace('bx-x', 'bx-search');
            searchForm.classList.remove('show');
        }
    })


     
   
    // Your code here

  
    // const popupOverlay = document.querySelector('.popup-overlay');
    // const closeBtn = document.querySelector('.close');
    // const saveBtn = document.querySelector('.save-btn');
    // popupOverlay.style.display = "none";
    // // Function to open popup for editing
    // function openPopup() {
    //     popupOverlay.style.display = 'flex';
       
    // }

    // // Function to close popup
    // function closePopup() {
    //     popupOverlay.style.display = 'none';
    // }

    // // Event listeners to open and close the popup
    // document.querySelectorAll('.edit').forEach(editButton => {
    //     editButton.addEventListener('click', openPopup);
    // });

    // closeBtn.addEventListener('click', closePopup);

    function deleted() 
       {
        Swal.fire({
  title: "Are you sure?",
  text: "You won't be able to revert this!",
  icon: "warning",
  showCancelButton: true,
  confirmButtonColor: "#3085d6",
  cancelButtonColor: "#d33",
  confirmButtonText: "Yes, delete it!"
}).then((result) => {
  if (result.isConfirmed) {
    deleteData();
    

    
  }
});
       }

    // Function to save edited data
    // saveBtn.addEventListener('click', function() {
    //     const editedFoodName = document.getElementById('editFoodName').value;
    //     const editedPrice = document.getElementById('editPrice').value;
    //     const editedCarbs = document.getElementById('editCarbs').value;
    //     const editedCalories = document.getElementById('editCalories').value;
    //     const editedProteins = document.getElementById('editProteins').value;
    //     const editedDetails = document.getElementById('editDetails').value;

    //     // Replace the alert with saving the data or sending it to the server
    //     console.log(`
    //         Edited Food Name: ${editedFoodName}\n
    //         Edited Price: ${editedPrice}\n
    //         Edited Carbs: ${editedCarbs}\n
    //         Edited Calories: ${editedCalories}\n
    //         Edited Proteins: ${editedProteins}\n
    //         Edited Details: ${editedDetails}
    //     `);

    //     closePopup(); // Close the popup after saving
    // });






// Create the main container
// ... (previous code remains the same)
/*const itemsFromDatabase = [
      {
        name: 'Pizza',
        imgSrc: 'pizza.png',
        price: '&#8377; 150',
         description: 'Relish a meticulously crafted pizza...',
          nutrition: {
          carbs: '64gm carbs',
          calories: '160kcal calories',
          proteins: '64gm proteins'
        }
      },
      {
        name: 'Burger',
        imgSrc: 'img/burger.jpg',
        price: '&#8377; 120',
        description: 'Savor the deliciousness of a classic burger...',
        nutrition: {
        carbs: '45gm carbs',
        calories: '200kcal calories',
        proteins: '50gm proteins'
        }
      },
      // Add more items from the database as needed...
    ];*/
   
 
        

 // Prevent default form submission
 // Uploading file in storage
       
                    //  saveMessage(downloadURL);
                       const data = {};

    const updateData = (key, value) => {
  data[key] = value;
};

    const fetchData = async () => {
  const queryParamsveg = new URLSearchParams(window.location.search);
  const itemNameveg = queryParamsveg.get('id');

  try {
    const response = await fetch(`https://polliwog-immune-stallion.ngrok-free.app/menu/getmenu/1/${itemNameveg}`,{ method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                "ngrok-skip-browser-warning": "true",
            },});
    if (response.ok) {
       data1 = await response.json();
       Object.assign(data, data1);

      console.log("dataa", data);
      console.log("fooddetail", data.fooddetails);
      document.getElementById('dishname').value = data.name;
      document.getElementById('price').value = data.price;
      document.getElementById('typeoffood').value = data.foodtype;
      document.getElementById('carbs').value = data.carbs;
      document.getElementById('calories').value = data.calories;
      document.getElementById('proteins').value = data.proteins;
      document.getElementById('veg').checked = data.isveg;
      document.getElementById('nonveg').checked = !data.isveg;
     document.getElementById('discount').value = data.discount;
      document.getElementById('details').value = data.fooddetails;
       document.getElementById('details').style.color = "black";
       document.getElementById('details').style.fontSize = "16px"; 

document.getElementById('popularYes').checked = data.ispopular;
document.getElementById('popularNo').checked = !data.ispopular;
const imageUrl = data.foodimg;


      // Call createItemElement to create the item element
      const itemElement = createItemElement(data);

      // Append the item element to the DOM
      document.getElementById('item-details').appendChild(itemElement);

    } else {
      console.log('Failed to fetch data');
    }
  } catch (error) {
    console.error('Error fetching data:', error);
  }
};





var firebaseConfig = {
             apiKey: "AIzaSyDoljoSPrgzgSoiJFR9DRs3zU40ZEZrN_0",
             authDomain: "fir-img-dfdc9.firebaseapp.com",
             projectId: "fir-img-dfdc9",
             storageBucket: "fir-img-dfdc9.appspot.com",
             messagingSenderId: "492489447470",
             appId: "1:492489447470:web:0e3c6990edcfe1e0b967bf",
             databaseURL: "https://fir-img-dfdc9.firebaseio.com"
         };
 
         firebase.initializeApp(firebaseConfig);
 
        // var messagesRef = firebase.database().ref('Checking');
 



async function sendDataToAPI(event) {
    event.preventDefault(); // Prevent default form submission
    
    // Uploading image
    // let imageUrl;
    // try {
    //     imageUrl = await uploadImage();
    //     console.log("newurl",imageUrl); // Call the function to upload image
    // } catch (error) {
    //     console.error('Error uploading image:', error);
    //     return; // Stop execution if image upload fails
    // }

    // Update data object with new image URL
    // data.foodimg = imageUrl;
    // Prepare data object
  

    // Send data object to API
    try {
        const response = await fetch('https://polliwog-immune-stallion.ngrok-free.app/menu/edit/menu/1', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        });
        if (response.ok) {
          Swal.fire({
                    position: "center",
                    icon: "success",
                    title: "Your work has been saved",
                    showConfirmButton: false,
                    timer: 3000,
                  })
                  .then(() => {
                    // Execute this code after the SweetAlert finishes
                    location.reload();
                  });
                
        } else {
            alert('Failed to update form data.');
        }
    } catch (error) {
        console.error('Error updating data:', error);
    }
}

function uploadImage() {
    return new Promise((resolve, reject) => {
        var storage = firebase.storage();
        var file = document.getElementById("files").files[0];
        var storageref = storage.ref();
        var type = "your_fixed_type_or_generate_dynamic_one";
        var thisref = storageref.child(type).child(file.name).put(file);

        thisref.on('state_changed', 
            function(snapshot) {
                // Progress tracking logic can be added here if needed
            }, 
            function(error) {
                console.error('Error uploading image:', error);
                reject(error);
            }, 
            function() {
                // Uploaded completed successfully, now we can get the download URL
                thisref.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                    // Getting the URL of the image
                    console.log('Image URL:', downloadURL);
                    resolve(downloadURL); // Resolve the promise with the image URL after successful upload
                }).catch(function(error) {
                    console.error('Error getting download URL:', error);
                    reject(error);
                });
            }
        );
    });
}

// update api 
// const sendDataToAPI = async (event) => {
//   event.preventDefault(); // Prevent default form submission



  
//   try {
//     const response = await fetch('https://polliwog-immune-stallion.ngrok-free.app/menu/edit/menu/1', {
//       method: 'POST',
//       headers: {
//         'Content-Type': 'application/json',
//       },
//       body: JSON.stringify(data), // Send updated data object to API
//     });
//     if (response.ok) {
//       alert('Form data updated successfully!');
//     } else {
//       alert('Failed to update form data.');
//     }
//   } catch (error) {
//     console.error('Error updating data:', error);
//   }
// };

// Add event listeners to form fields to update data object on change
document.getElementById('dishname').addEventListener('input', (event) => {
  updateData('name', event.target.value);
});

document.getElementById('price').addEventListener('input', (event) => {
  updateData('price', event.target.value);
});

document.getElementById('typeoffood').addEventListener('input', (event) => {
  updateData('foodtype', event.target.value);
});

document.getElementById('carbs').addEventListener('input', (event) => {
  updateData('carbs', event.target.value);
});

document.getElementById('calories').addEventListener('input', (event) => {
  updateData('calories', event.target.value);
});

document.getElementById('proteins').addEventListener('input', (event) => {
  updateData('proteins', event.target.value);
});

document.querySelectorAll('input[name="isveg"]').forEach((input) => {
  input.addEventListener('change', (event) => {
    updateData('isveg', event.target.value);
  });
});

document.querySelectorAll('input[name="ispopular"]').forEach((input) => {
  input.addEventListener('change', (event) => {
    updateData('ispopular', event.target.value);
  });
});

document.getElementById('files').addEventListener('change', async (event) => {
  let imageUrl;
    try {
        imageUrl = await uploadImage();
        console.log("newurl",imageUrl); // Call the function to upload image
    } catch (error) {
        console.error('Error uploading image:', error);
        return; // Stop execution if image upload fails
    }
    data.foodimg = imageUrl;
    console.log(imageUrl);
});





// Call fetchData function to populate form with API values
fetchData();

    // Function to create item elements
    function createItemElement(item) {
      const mainContainer = document.createElement('div');
      mainContainer.classList.add('contentdes');

      const imgContainer = document.createElement('div');
      imgContainer.classList.add('img-container');
      const img = document.createElement('img');
      img.classList.add('content-img');
      img.setAttribute('src', item.imgSrc);
      imgContainer.appendChild(img);

      const informationDiv = document.createElement('div');
      informationDiv.classList.add('information');

      const heading = document.createElement('h2');
      heading.innerHTML = `<p>${item.name}</p><p><span style="text-decoration: line-through; color: green;">&#8377;${item.price}</span>&nbsp; &nbsp;<span>${item.discount}% Off</span></p><p>&#8377;${item.price-item.price*item.discount/100}</p>`;
      informationDiv.appendChild(heading);

      const foodDetails = document.createElement('p');
      foodDetails.setAttribute('id', 'details');
      foodDetails.innerHTML = '<br>Food Details:';
      informationDiv.appendChild(foodDetails);

      const details1 = document.createElement('p');
      details1.setAttribute('id', 'details1');
      details1.innerHTML = `"${item.description}"`;
      informationDiv.appendChild(details1);

      const nutritionDetails = document.createElement('p');
      nutritionDetails.setAttribute('id', 'details');
      nutritionDetails.innerHTML = '<br>Nutrition Information:<br>';
      informationDiv.appendChild(nutritionDetails);

      const nutritionDiv = document.createElement('div');
      nutritionDiv.classList.add('nutrition');

      for (const key in item.nutrition) {
        const nutritionElement = document.createElement('div');
        nutritionElement.classList.add('nutrition-element');
        nutritionElement.innerHTML = `
          <p>${key}: ${item.nutrition[key]}</p>
        `;
        nutritionDiv.appendChild(nutritionElement);
      }

      informationDiv.appendChild(nutritionDiv);

      const buttonDiv = document.createElement('div');
      buttonDiv.classList.add('btn');

      const deleteButton = document.createElement('button');
      deleteButton.classList.add('delete');
      deleteButton.innerHTML = 'Delete <i class="bx bxs-trash-alt"></i>';

      const editButton = document.createElement('button');
      editButton.classList.add('edit');
      editButton.innerHTML = 'Edit <i class="bx bxs-edit-alt"></i>';

      buttonDiv.appendChild(deleteButton);
      buttonDiv.appendChild(editButton);

      informationDiv.appendChild(buttonDiv);

      mainContainer.appendChild(imgContainer);
      mainContainer.appendChild(informationDiv);

      return mainContainer;
    }

    // Fetch data from the backend
    //let fetchedDataArray = [];

    // Function to create an item element based on the item data
    function createItemElement(item) {
      const mainContainer = document.createElement('div');
      mainContainer.classList.add('contentdes');

      const imgContainer = document.createElement('div');
      imgContainer.classList.add('img-container');
      const img = document.createElement('img');
      img.classList.add('content-img');
      img.setAttribute('src', `${item.foodimg}`);
      imgContainer.appendChild(img);

      const informationDiv = document.createElement('div');
      informationDiv.classList.add('information');

      const heading = document.createElement('h2');
      heading.innerHTML = `<p>${item.name}</p><p><span style="text-decoration: line-through; color: green;">&#8377; ${item.price}</span>&nbsp; &nbsp;<span>${item.discount}% Off</span></p><p>&#8377; ${item.price-item.price*item.discount/100}</p>`;
      informationDiv.appendChild(heading);

      const foodDetails = document.createElement('p');
      foodDetails.setAttribute('id', 'details');
      foodDetails.innerHTML = '<br>Food Details:';
      informationDiv.appendChild(foodDetails);

      const details1 = document.createElement('p');
      details1.setAttribute('id', 'details1');
      details1.innerHTML = `"${item.fooddetails}"`;
      informationDiv.appendChild(details1);

     
      // const carbs = document.createElement('p');
      // carbs.setAttribute('id', 'carbs');
      // carbs.innerHTML = '<br>Food Details:';
      // informationDiv.appendChild(foodDetails);
      


      const nutritionDetails = document.createElement('p');
      nutritionDetails.setAttribute('id', 'details');
      nutritionDetails.innerHTML = '<br>Nutrition Information:<br>';
      informationDiv.appendChild(nutritionDetails);

      const nutritionDiv = document.createElement('div');
      nutritionDiv.classList.add('nutrition');

      const carbsDiv = document.createElement('div');
      carbsDiv.classList.add('carbs');
      const carbs = document.createElement('p');
      carbs.setAttribute('id', 'carbs');
      carbs.innerHTML = `${item.carbs}gm<br>Carbohydrate`;
      carbsDiv.appendChild(carbs);
      nutritionDiv.appendChild(carbsDiv)
        
      const caloriesDiv = document.createElement('div');
      caloriesDiv.classList.add('carbs');
      const calories = document.createElement('p');
      calories.setAttribute('id', 'carbs');
      calories.innerHTML = `${item.calories}kcal<br>Calories`;
      caloriesDiv.appendChild(calories);
      nutritionDiv.appendChild(caloriesDiv)


      const proteinsDiv = document.createElement('div');
      proteinsDiv.classList.add('carbs');
      const proteins = document.createElement('p');
      proteins.setAttribute('id', 'proteins');
      proteins.innerHTML = `${item.proteins}gm<br>Proteins`;
      proteinsDiv.appendChild(proteins);
      nutritionDiv.appendChild(proteinsDiv)

      
      informationDiv.appendChild(nutritionDiv);

      const buttonDiv = document.createElement('div');
      buttonDiv.classList.add('btn');

      const deleteButton = document.createElement('button');
      deleteButton.classList.add('delete');
      deleteButton.innerHTML = 'Delete <i class="bx bxs-trash-alt"></i>';
      deleteButton.addEventListener('click', function () {
        deleted()
});


      const editButton = document.createElement('button');
      editButton.classList.add('edit');
      editButton.innerHTML = 'Edit <i class="bx bxs-edit-alt"></i>';
      editButton.addEventListener('click', function () {
        addformdelay()
});

    

      buttonDiv.appendChild(deleteButton);
      buttonDiv.appendChild(editButton);

      informationDiv.appendChild(buttonDiv);

      mainContainer.appendChild(imgContainer);
      mainContainer.appendChild(informationDiv);

      return mainContainer;
    }

    fetchData();

      const deleteData = async () => {
      const queryParamsveg = new URLSearchParams(window.location.search);
      const restId = queryParamsveg.get('restid');
      const menuId = queryParamsveg.get('id');

  try {
    const response = await fetch(`https://polliwog-immune-stallion.ngrok-free.app/menu/deletebyid/1/${menuId}`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        "ngrok-skip-browser-warning": "true",

        // Add any additional headers if required
      },
      // body: JSON.stringify({}) // Include a request body if necessary
    });

    if (response.ok) {
      console.log('Data deleted successfully');
      await Swal.fire({
      title: "Deleted!",
      text: "Your file has been deleted.",
      icon: "success"
    });
      window.location.href = 'adminmenu.html';
      // Optionally, redirect or perform other actions after successful deletion
    } else {
      console.log('Failed to delete data');
    }
  } catch (error) {
    console.error('Error deleting data:', error);
  }
};





  const itemsFromDatabase2 = [
  {
    vegId: 1,
    name: 'Paneer Tikka',
    imgSrc: 'img/paneer tikka.avif',
    price: '&#8377 150',
    description: 'Savor the deliciousness of a classic Paneer Tikka',
    nutrition: {
      carbs: '55gm ',
      calories: '150kcal ',
      proteins: '60gm '
    },
    // Add the link for redirection
  },
  {
    vegId: 2,
    imgSrc: 'img/matar paneer.png',
    name: 'Potato Cutlet',
    price: '&#8377 150',
    description: 'Savor the deliciousness of a classic Potato Cutleti...',
    nutrition: {
      carbs: '55gm ',
      calories: '150kcal ',
      proteins: '60gm '
    },
    // Add the link for redirection
  },
  {
  vegId: 3,
  imgSrc: 'img/allutikki.jpeg',
  name: 'Paneer Tikka',
  price: '&#8377 180',
  description: 'Savor the deliciousness of a classic Paneer Tikka...',
  nutrition: {
    carbs: '55gm ',
    calories: '150kcal ',
    proteins: '60gm '
  },
  // Add the link for redirection
},

{
  vegId: 4,
  imgSrc: 'img/pannerbutter.jpg',
  name: ' Butter Paneer ',
  price: '&#8377 170',
  description: 'Savor the deliciousness of a classic Butter Paneer...',
  nutrition: {
    carbs: '55gm ',
    calories: '150kcal ',
    proteins: '60gm '
  },
  // Add the link for redirection
},

  {
    vegId: 5,
    imgSrc: '/img/kashmiri pulao.jpeg',
    name: 'Kashmiri Pulao',
    price: '&#8377 150',
    description: 'Savor the deliciousness of a classic Kashmiri Pulao...',
    nutrition: {
      carbs: '55gm ',
      calories: '150kcal ',
      proteins: '60gm '
    },
    // Add the link for redirection
  },
  {
    vegId: 6,
    imgSrc: '/img/dal makani.jpg',
    name: 'Dal Makhani',
    price: '&#8377 160',
    description: 'Savor the deliciousness of a classic Dal Makhani...',
    nutrition: {
      carbs: '55gm ',
      calories: '150kcal ',
      proteins: '60gm '
    },
    // Add the link for redirection
  },
  {
    vegId: 7,
    imgSrc: '/img/dal makani.jpg',
    name: 'Dal Makhani',
    price: '&#8377 160',
    description: 'Savor the deliciousness of a classic Dal Makhani...',
    nutrition: {
      carbs: '55gm ',
      calories: '150kcal ',
      proteins: '60gm '
    },
    // Add the link for redirection
  }
];


function addformdelay() {
       setTimeout(addform, 0); // 2000 milliseconds = 2 seconds
    }
function deleteformdelay() {
       setTimeout(deleteform, 0); // 2000 milliseconds = 2 seconds
}
  
        function addform(){
              var container=document.getElementById('container');
              container.classList.toggle('active');
              var bgblur=document.getElementById('bgblur');
              bgblur.classList.toggle('active');
              
           }

     function close11111() {
      var container = document.getElementById('container');
      container.classList.remove('active');
      var bgblur = document.getElementById('bgblur');
      bgblur.classList.remove('active');
  }
  

   document.addEventListener('click', function(event) {
  const activeView = document.getElementById('container');
  const activeView2 = document.getElementById('container2');
  // Check if the clicked element is the active view or a descendant of the active view
  const isClickedInsideActiveView = activeView.contains(event.target);
  //const isClickedInsideActiveView2 = activeView2.contains(event.target);
  if (!isClickedInsideActiveView ) {
    // Click occurred outside the active view
    // Change the active view's color to red
    close11111();
    //close2();

  } 
 
});



// Add more items a


// const fetchData = async () => {
//   const response = await fetch(
//     `https://royalwebtech-restaurant-production.up.railway.app/menu/getmenus/vegornonveg/1/veg`,
//     {
//       method: "GET",
//       headers: {
//         "Content-Type": "application/json",
//       },
//     }
//   );

//   if (response.ok) {
//     const data = await response.json();
//     vegItems = data;
//     console.log("vegItems : ", vegItems);
//     renderData();
//   } else {
//     alert("Unable to fetch data");
//   }
// };

// // Function to render data on the webpage
// // ...

// // Function to create a veg item element
// function createVegItem( name, price, vegId,foodimg) {
//   const vegItem = document.createElement('div');
//   vegItem.innerHTML = `
//     <a href="menusdescription.html?id=${vegId}">
//       <img src="data:image/png;base64,${foodimg}" alt="${name}" class="veg-des">
//       <br>
//       <p>${name}<br>${price}</p>
//     </a>
//   `;
//   vegItem.classList.add('veg-head');

//   vegItem.addEventListener('click', () => {
//     console.log(`Redirecting to: menusdescription.html?id=${vegId}`);
//   });

//   return vegItem;
// }

// // Function to render data on the webpage
// const renderData = () => {
//   const vegContainer = document.getElementById('veg-head');

//   // Iterate over vegItems array
//   vegItems.forEach(item => {
//     // Create a veg item element for each item
//     const vegItemElement = createVegItem( item.name, item.price, item.vegId,item.foodimg);

//     // Append the created veg item element to the vegContainer
//     vegContainer.appendChild(vegItemElement);
//   });
// };

// // ...

// // Call the fetchData function to fetch data and render it
// fetchData();





  // const selectedItem = itemsFromDatabase.find(item => item.name === itemName);

  // if (selectedItem) {
  //   const itemDetailsContainer = document.getElementById('item-details');
  //   const itemElement = createItemElement(selectedItem);

  //   if (itemElement instanceof Node) {
  //     itemDetailsContainer.appendChild(itemElement);
  //   } else {
  //     console.log('Item element is not a valid DOM Node.');
  //   }
  // } else {
  //   console.log('Item not found');
  // }




// Assuming itemNameveg is the ID you want to find
// const selectedItem2 = fetchedDataArray.find(item => itemNameveg == item.id);

// if (selectedItem2) {
//   const itemDetailsContainer2 = document.getElementById('item-details');
//   const itemElement2 = createItemElement(selectedItem2);

//   if (itemElement2 instanceof Node) {
//     // Clear existing content in the container before appending new item
//     itemDetailsContainer2.innerHTML = '';
//     itemDetailsContainer2.appendChild(itemElement2);
//   } else {
//     console.log('Item element is not a valid DOM Node.');
//   }
// } else {
//   console.log('Item not found');
// }

// console.log('itemNameveg:', itemNameveg);


// const selectedItem3 = itemsFromDatabase2.find(item => item.vegId === parseInt(itemNameveg));

// console.log('selectedItem3:', selectedItem3);

// if (selectedItem3) {

//     const itemDetailsContainer3 = document.getElementById('item-details');
//     const itemElement3 = createItemElement(selectedItem3);

//   if (itemElement3 instanceof Node) {
//     itemDetailsContainer3.appendChild(itemElement3);
//   } else {
//     console.log('Item element is not a valid DOM Node.');
//   }
// } else {
//   console.log('Item not found');
// }

//});



    </script>
 </body>
 </html>